{"version":3,"sources":["../server/app.js"],"names":["defaultPort","port","Number","process","env","PORT","app","compiler","use","noInfo","publicPath","output","join","__dirname","json","urlencoded","extended","static","req","res","sendFile","listen","error","console","info"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA,MAAMA,cAAc,IAApB;AACA,MAAMC,OAAOC,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoBL,WAA3B,CAAb;AACA,MAAMM,MAAM,wBAAZ;AACA,MAAMC,WAAW,yCAAjB;;AAEAD,IAAIE,GAAJ,CACE,oCACED,QADF,EAEE;AACEE,UAAQ,IADV;AAEEC,cAAY,kBAAcC,MAAd,CAAqBD;AAFnC,CAFF,CADF;;AAUAJ,IAAIE,GAAJ,CAAQ,oCAAqBD,QAArB,CAAR;;AAEAD,IAAIE,GAAJ,CACE,4BACE,eAAKI,IAAL,CAAUC,SAAV,EAAqB,uBAArB,CADF,CADF;AAKAP,IAAIE,GAAJ,CAAQ,sBAAO,KAAP,CAAR;AACAF,IAAIE,GAAJ,CAAQ,qBAAWM,IAAX,EAAR;AACAR,IAAIE,GAAJ,CACE,qBAAWO,UAAX,CAAsB;AACpBC,YAAU;AADU,CAAtB,CADF;AAKAV,IAAIE,GAAJ,CAAQ,6BAAR;;AAEA;AACAF,IAAIE,GAAJ,CACE,kBAAQS,MAAR,CACE,eAAKL,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CADF,CADF;AAKA;;AAEA;AACAP,IAAIE,GAAJ,CAAQ,CAACU,GAAD,EAAMC,GAAN,KAAc;AACpBA,MAAIC,QAAJ,CAAa,eAAKR,IAAL,CAAUC,SAAV,EAAqB,sBAArB,CAAb;AACD,CAFD;;AAIA;AACAP,IAAIE,GAAJ,CAAQ,OAAR;;AAEA;AACAF,IAAIE,GAAJ,CAAQ,qBAAiBF,GAAjB,CAAR;;AAEA;AACAA,IAAIe,MAAJ,CAAWpB,IAAX,EAAiBqB,SAAS;AACxB,MAAIA,KAAJ,EAAW;AACTC,YAAQD,KAAR,CAAcA,KAAd;AACD,GAFD,MAEO;AACLC,YAAQC,IAAR,CAAa,6EAAb,EAA4FvB,IAA5F,EAAkGA,IAAlG;AACD;AACF,CAND;;kBAQeK,G","file":"app.js","sourcesContent":["import apiRoutes from './routes/api'\nimport bodyParser from 'body-parser'\nimport cookieParser from 'cookie-parser'\nimport express from 'express'\nimport favicon from 'serve-favicon'\nimport getErrorHandlers from './routes/error'\nimport logger from 'morgan'\nimport path from 'path'\nimport webpack from 'webpack'\nimport webpackConfig from '../webpack.config'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackHotMiddleware from 'webpack-hot-middleware'\n\n// use port number supplied by environment otherwise use default\nconst defaultPort = 5000\nconst port = Number(process.env.PORT || defaultPort)\nconst app = express()\nconst compiler = webpack(webpackConfig)\n\napp.use(\n  webpackDevMiddleware(\n    compiler,\n    {\n      noInfo: true,\n      publicPath: webpackConfig.output.publicPath\n    }\n  )\n)\n\napp.use(webpackHotMiddleware(compiler))\n\napp.use(\n  favicon(\n    path.join(__dirname, '../client/favicon.ico')\n  )\n)\napp.use(logger('dev'))\napp.use(bodyParser.json())\napp.use(\n  bodyParser.urlencoded({\n    extended: false\n  })\n)\napp.use(cookieParser())\n\n// routes for static assets\napp.use(\n  express.static(\n    path.join(__dirname, '../client/build/')\n  )\n)\n// the public path is defined in webpack.config.js\n\n// add html route\napp.use((req, res) => {\n  res.sendFile(path.join(__dirname, '../client/index.html'))\n})\n\n// ajax routes\napp.use('/api/', apiRoutes)\n\n// error routes\napp.use(getErrorHandlers(app))\n\n// start app\napp.listen(port, error => {\n  if (error) {\n    console.error(error)\n  } else {\n    console.info('==> ðŸŒŽ  Listening on port %s. Open up http://localhost:%s/ in your browser.', port, port)\n  }\n})\n\nexport default app\n"]}